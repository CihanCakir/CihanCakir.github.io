<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Particle Player Component - Magic</title>
    <meta name="description" content="Magic example for Particle Player component."></meta>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="https://rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.1/dist/aframe-extras.min.js" ></script>
    <script src="../vortex/aframe-particleplayer-component.js""></script>
<script>  


AFRAME.registerComponent('markerhandler', {

init: function() {
    const animatedMarker = document.querySelector("#animated-marker");
    const aEntity = document.querySelector("#animated-model");

    // every click, we make our model grow in size :)
    animatedMarker.addEventListener('click', function(ev, target){
        const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
        if (aEntity && intersectedElement === aEntity) {
          location.assign('cong.html');

        }
    });
}});
    

</script>

  </head>
  <body>
      <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
          <a-assets>
        <a-asset-item id="particlesOrbJson" src="particles-orb.json"></a-asset-item>
        <a-asset-item id="particlesEnergyJson" src="particles-energy.json"></a-asset-item>
        <a-asset-item id="particlesDustJson" src="particles-dust.json"></a-asset-item>
        <a-asset-item id="coinEx" response-type="arrayBuffer" src="scene.gltf"></a-asset-item>
        <img src="dust.png" id="dustTex">
        <img src="floor.jpg" id="floorTex">
        <img src="star.png" id="starTex">
        <img src="energy.png" id="energyTex">
        <img src="floor_roughness.jpg" id="floorRoughTex">
      </a-assets>
      <a-marker markerhandler emitevents="true" cursor="rayOrigin: mouse" id="animated-marker"  preset="custom" type="pattern" url="../../img/patterns/pattern-inooster.patt" value='6'>

      <a-entity position="0 0.5 0" rotation="0 0 0">
          <a-entity particleplayer="delay: 500; src: #particlesOrbJson; img: #coinEx; dur: 4000; count: 100%; scale: 2.5; pscale: 9; interpolate: false; shader: standard; poolSize: 1; loop: true"></a-entity>
          <a-entity gltf-model="#coinEx"  id="animated-model" scale="0.5 0.5 0.5" position="0 1 0" animation-mixer="clip:CilindroAction;"></a-entity>

        <a-entity particleplayer="delay: 500; src: #particlesOrbJson; img: #starTex; dur: 4000; count: 100%; scale: 2.5; pscale: 9; interpolate: false; shader: standard; poolSize: 1; loop: true"></a-entity>

        <a-entity particleplayer="delay: 500; src: #particlesEnergyJson; img: #energyTex; dur: 4000; count: 100%; scale: 2.5; pscale: 2; interpolate: false; shader: standard; poolSize: 1; loop: true;"></a-entity>

        <a-entity particleplayer="delay: 500; src: #particlesDustJson; img: #dustTex; dur: 4000; count: 100%; scale: 2.5; pscale: 1; interpolate: false; shader: standard; poolSize: 1; loop: true; color: #FCF409"></a-entity>
        <a-text id="size" position="1 1 1"
        animation="property: scale; to: 2 2 2; dir: alternate; loop: true"
        text="color: white; align: center; value: Animating size; width: 10">
</a-entity>
      </a-entity>

      </a-marker>
      <!-- lights -->
      <a-light position="4 5 -10" type="point" color="#FCF409"></a-light>
      <a-light position="-6 14 20" type="point" color="#FCF409"></a-light>

      <!-- floor and walls -->
      </a-scene>

    <!-- GitHub Corner. -->
    
  </body>
</html>
